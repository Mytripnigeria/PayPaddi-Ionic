"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7664],{7664:(k,a,l)=>{l.r(a),l.d(a,{NextOfKinPageModule:()=>S});var m=l(9808),i=l(4182),r=l(8779),d=l(1493),u=l(655),e=l(2096),c=l(649),_=l(9709),p=l(9244),x=l(7913);function g(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",8),e.NdJ("ngSubmit",function(){e.CHM(t);const f=e.oxw();return e.KtG(f.submit())}),e.TgZ(1,"ion-button",9),e._uU(2," Done "),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.edit_profile_form),e.xp6(1),e.Q6J("disabled",t.edit_profile_form.invalid)}}function h(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Firstname is required."),e.qZA()())}function Z(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Lastname is required."),e.qZA()())}function N(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Middle name is required."),e.qZA()())}function q(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Username is required."),e.qZA()())}function T(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Phone number is required."),e.qZA()())}function K(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Invalid phone number."),e.qZA()())}function A(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Invalid phone number."),e.qZA()())}function O(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Email is required."),e.qZA()())}function v(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Invalid Email."),e.qZA()())}function U(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Address is required."),e.qZA()())}function I(o,n){1&o&&(e.TgZ(0,"ion-text",27)(1,"small",28),e._uU(2,"Relationship is required."),e.qZA()())}function P(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",10),e.NdJ("submit",function(){e.CHM(t);const f=e.oxw();return e.KtG(f.submit())}),e.TgZ(1,"ion-list",11)(2,"ion-item")(3,"ion-label",12),e._uU(4,"First name"),e.qZA(),e._UZ(5,"ion-input",13),e.qZA(),e.YNc(6,h,3,0,"ion-text",14),e.TgZ(7,"ion-item")(8,"ion-label",12),e._uU(9,"Last name"),e.qZA(),e._UZ(10,"ion-input",15),e.qZA(),e.YNc(11,Z,3,0,"ion-text",14),e.TgZ(12,"ion-item")(13,"ion-label",12),e._uU(14,"Middle Name"),e.qZA(),e._UZ(15,"ion-input",16),e.qZA(),e.YNc(16,N,3,0,"ion-text",14),e.TgZ(17,"ion-item")(18,"ion-label",12),e._uU(19,"Username"),e.qZA(),e._UZ(20,"ion-input",17),e.qZA(),e.YNc(21,q,3,0,"ion-text",14),e.TgZ(22,"ion-item")(23,"ion-label",12),e._uU(24,"Phone Number"),e.qZA(),e._UZ(25,"ion-input",18),e.qZA(),e.YNc(26,T,3,0,"ion-text",14),e.YNc(27,K,3,0,"ion-text",14),e.YNc(28,A,3,0,"ion-text",14),e.TgZ(29,"ion-item")(30,"ion-label",12),e._uU(31,"Email Address"),e.qZA(),e._UZ(32,"ion-input",19),e.qZA(),e.YNc(33,O,3,0,"ion-text",14),e.YNc(34,v,3,0,"ion-text",14),e.TgZ(35,"ion-item")(36,"ion-label",12),e._uU(37,"Home Address"),e.qZA(),e._UZ(38,"ion-input",20),e.qZA(),e.YNc(39,U,3,0,"ion-text",14),e.TgZ(40,"ion-item")(41,"ion-label",12),e._uU(42,"Relationship Type"),e.qZA(),e.TgZ(43,"ion-select",21)(44,"ion-select-option",22),e._uU(45,"Brother"),e.qZA(),e.TgZ(46,"ion-select-option",23),e._uU(47,"Sister"),e.qZA(),e.TgZ(48,"ion-select-option",24),e._uU(49,"Father"),e.qZA(),e.TgZ(50,"ion-select-option",25),e._uU(51,"Mother"),e.qZA(),e.TgZ(52,"ion-select-option",26),e._uU(53,"Others"),e.qZA()()(),e.YNc(54,I,3,0,"ion-text",14),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.edit_profile_form),e.xp6(6),e.Q6J("ngIf",t.edit_profile_form.controls.firstname.errors&&t.edit_profile_form.controls.firstname.errors.required&&t.edit_profile_form.controls.firstname.touched),e.xp6(5),e.Q6J("ngIf",t.edit_profile_form.controls.lastname.errors&&t.edit_profile_form.controls.lastname.errors.required&&t.edit_profile_form.controls.lastname.touched),e.xp6(5),e.Q6J("ngIf",t.edit_profile_form.controls.middlename.errors&&t.edit_profile_form.controls.middlename.errors.required&&t.edit_profile_form.controls.middlename.touched),e.xp6(5),e.Q6J("ngIf",t.edit_profile_form.controls.username.errors&&t.edit_profile_form.controls.username.errors.required&&t.edit_profile_form.controls.username.touched),e.xp6(5),e.Q6J("ngIf",t.edit_profile_form.controls.phone.errors&&t.edit_profile_form.controls.phone.errors.required&&t.edit_profile_form.controls.phone.touched),e.xp6(1),e.Q6J("ngIf",t.edit_profile_form.controls.phone.errors&&t.edit_profile_form.controls.phone.errors.minlength&&t.edit_profile_form.controls.phone.touched),e.xp6(1),e.Q6J("ngIf",t.edit_profile_form.controls.phone.errors&&t.edit_profile_form.controls.phone.errors.maxlength&&t.edit_profile_form.controls.phone.touched),e.xp6(5),e.Q6J("ngIf",t.edit_profile_form.controls.email.errors&&t.edit_profile_form.controls.email.errors.required&&t.edit_profile_form.controls.email.touched),e.xp6(1),e.Q6J("ngIf",t.edit_profile_form.controls.email.errors&&t.edit_profile_form.controls.email.errors.email&&t.edit_profile_form.controls.email.touched),e.xp6(5),e.Q6J("ngIf",t.edit_profile_form.controls.address.errors&&t.edit_profile_form.controls.address.errors.required&&t.edit_profile_form.controls.address.touched),e.xp6(15),e.Q6J("ngIf",t.edit_profile_form.controls.relationship.errors&&t.edit_profile_form.controls.relationship.errors.required&&t.edit_profile_form.controls.relationship.touched)}}const b=[{path:"",component:(()=>{class o{constructor(t,s,f,Y,Q,C,y){this.formBuilder=t,this.toastService=s,this.navController=f,this.userService=Y,this.dataService=Q,this.util=C,this.actionSheetController=y,this.nextOfKin=null,this.submit_attempt=!1}ionViewWillEnter(){this.nextOfKin=this.dataService.getUserNextofKin(),console.log(this.nextOfKin),this.edit_profile_form=this.formBuilder.group({firstname:[this.nextOfKin.firstname,i.kI.required],lastname:[this.nextOfKin.lastname,i.kI.required],username:[this.nextOfKin.username,i.kI.required],middlename:[this.nextOfKin.middlename,i.kI.required],email:[this.nextOfKin.email,i.kI.compose([i.kI.required,i.kI.email])],address:[this.nextOfKin.address,i.kI.required],relationship:[this.nextOfKin.relationship,i.kI.required],phone:[this.nextOfKin.phone,i.kI.compose([i.kI.required,i.kI.minLength(11),i.kI.maxLength(11)])]})}submit(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.submit_attempt=!0,this.edit_profile_form.valid){const t=yield this.util.loader("Updating");t.present();const s=yield this.userService.updateNextOfKin(this.edit_profile_form.value);s.error?(t.dismiss(),this.toastService.presentToast("Error","top","danger","Could not save next of kin",2e3)):(yield this.dataService.commitNextOfKin(),t.dismiss(),console.log(s),this.toastService.presentToast("Success","top","success","Next of kin saved",2e3),this.navController.back())}else this.toastService.presentToast("Error","Please fill in all required fields","top","danger",2e3)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(c.k),e.Y36(r.SH),e.Y36(_.K),e.Y36(p.D),e.Y36(x.t),e.Y36(r.BX))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-next-of-kin"]],decls:11,vars:4,consts:[["collapse","fade",3,"translucent"],["slot","start"],["text","Settings","defaultHref","/settings"],["slot","end"],["class","form-default",3,"formGroup","ngSubmit",4,"ngIf"],[3,"fullscreen"],[1,"ion-padding"],["class","form-default",3,"formGroup","submit",4,"ngIf"],[1,"form-default",3,"formGroup","ngSubmit"],["type","submit",3,"disabled"],[1,"form-default",3,"formGroup","submit"],["lines","none",1,"item-card-list"],["color","tertiary","position","stacked"],["formControlName","firstname","placeholder","First name"],["color","danger",4,"ngIf"],["formControlName","lastname","placeholder","Last name"],["formControlName","middlename","placeholder","Middle Name"],["formControlName","username","placeholder","Username"],["formControlName","phone","placeholder","Phone Number"],["formControlName","email","placeholder","Email Address"],["formControlName","address","placeholder","Home Address"],["formControlName","relationship","value","brother","placeholder","Select Relationship Type"],["value","brother"],["value","sister"],["value","father"],["value","mother"],["value","other"],["color","danger"],[1,"error-message-form"]],template:function(t,s){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Next of Kin "),e.qZA(),e.TgZ(6,"ion-buttons",3),e.YNc(7,g,3,2,"form",4),e.qZA()()(),e.TgZ(8,"ion-content",5)(9,"div",6),e.YNc(10,P,55,12,"form",7),e.qZA()()),2&t&&(e.Q6J("translucent",!0),e.xp6(7),e.Q6J("ngIf",s.nextOfKin),e.xp6(1),e.Q6J("fullscreen",!0),e.xp6(2),e.Q6J("ngIf",s.nextOfKin))},dependencies:[m.O5,i._Y,i.JJ,i.JL,i.sg,i.u,r.oU,r.YG,r.Sm,r.W2,r.Gu,r.pK,r.Ie,r.Q$,r.q_,r.t9,r.n0,r.yW,r.wd,r.sr,r.QI,r.j9,r.cs]}),o})()}];let J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(b),d.Bz]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,i.u5,i.UX,r.Pc,J]}),o})()}}]);