"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9254,1228],{9254:(Z,v,a)=>{a.d(v,{d:()=>A});var d=a(655),t=a(3078),c=a(5216),e=a(2096),l=a(8779),P=a(4182),y=a(9244),f=a(649),M=a(7913),_=a(9808),C=a(2284),b=a(9709);const p=function(){return{standalone:!0}};function T(r,h){if(1&r){const n=e.EpF();e.TgZ(0,"div")(1,"ion-item",11)(2,"ion-label",12),e._uU(3,"Amount"),e.qZA(),e.TgZ(4,"ion-input",13),e.NdJ("ngModelChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.amount=o)})("ngModelChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.amountChange(o))})("keypress",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.keyPressNumbers(o))}),e.qZA()(),e.TgZ(5,"small")(6,"span"),e._uU(7,"min - 20 "),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.ALo(10,"currency"),e.qZA()()()}if(2&r){const n=e.oxw();e.xp6(4),e.Q6J("ngModel",n.amount)("ngModelOptions",e.DdM(7,p)),e.xp6(4),e.Udp("color",n.amountHolder>n.getMax()?"red":"white"),e.xp6(1),e.hij("max - ",e.lcZ(10,5,n.getMax()),"")}}function m(r,h){if(1&r){const n=e.EpF();e.TgZ(0,"ion-item",14)(1,"ion-label",12),e._uU(2,"select bank"),e.qZA(),e.TgZ(3,"ion-input",15),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.chooseBank())})("ngModelChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.bank_code=o)}),e.qZA(),e.TgZ(4,"ion-button",16),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.selectBeneficiary())}),e._uU(5," Select beneficiary "),e.qZA()()}if(2&r){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.bank_code)("ngModelOptions",e.DdM(5,p))("readonly",!0)("value",n.bankName),e.xp6(1),e.Q6J("disabled",n.verifying)}}function u(r,h){if(1&r){const n=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label",12),e._uU(2,"Account number"),e.qZA(),e.TgZ(3,"ion-input",17),e.NdJ("ngModelChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.account_number=o)})("ngModelChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.acctNumChange(o))}),e.qZA()()}if(2&r){const n=e.oxw();e.xp6(3),e.Q6J("readonly",n.beneficiary)("ngModel",n.account_number)}}function g(r,h){1&r&&(e.TgZ(0,"ion-item",14)(1,"ion-label")(2,"p"),e._UZ(3,"ion-skeleton-text",18),e.qZA(),e.TgZ(4,"h2",19),e._UZ(5,"ion-skeleton-text",20),e.qZA()()())}function k(r,h){if(1&r){const n=e.EpF();e.TgZ(0,"ion-item",14)(1,"ion-label",12),e._uU(2,"Account Name"),e.qZA(),e.TgZ(3,"ion-input",21),e.NdJ("ngModelChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.accountName=o)}),e.qZA()()}if(2&r){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.accountName)("ngModelOptions",e.DdM(2,p))}}function O(r,h){if(1&r){const n=e.EpF();e.TgZ(0,"ion-item",14)(1,"ion-label",12),e._uU(2,"Narration"),e.qZA(),e.TgZ(3,"ion-input",22),e.NdJ("ngModelChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.narration=o)}),e.qZA()()}if(2&r){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.narration)}}function E(r,h){if(1&r){const n=e.EpF();e.TgZ(0,"ion-item",14)(1,"ion-label",23),e._uU(2," Add to beneficiaries "),e.qZA(),e.TgZ(3,"ion-toggle",24),e.NdJ("ionChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.switchBeneficiary(o))})("ngModelChange",function(o){e.CHM(n);const s=e.oxw();return e.KtG(s.addBeneficiary=o)}),e.qZA()()}if(2&r){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.addBeneficiary)("ngModelOptions",e.DdM(2,p))}}function x(r,h){if(1&r&&(e.TgZ(0,"ul",14)(1,"li"),e._uU(2),e.ALo(3,"currency"),e.qZA(),e.TgZ(4,"li"),e._uU(5),e.ALo(6,"currency"),e.qZA()()),2&r){const n=e.oxw();e.xp6(2),e.hij("Fee - \u20a6",e.lcZ(3,2,n.currentFee||0),""),e.xp6(3),e.hij("Total - \u20a6",e.lcZ(6,4,n.totalAmount||0),"")}}let A=(()=>{class r{constructor(n,i,o,s,B,D,U,I,N){this.modalController=n,this.formBuilder=i,this.dataService=o,this.toastService=s,this.navCtrl=B,this.util=D,this.currencyPipe=U,this.transferService=I,this.userService=N,this.verified=!1,this.verifying=!1,this.bankCode="",this.accountName=null,this.bankName="",this.beneficiary=!1,this.addBeneficiary=!1,this.numberIsComplete=!1,this.blocked=!1,this.amountHolder=null,this.totalAmount=null,this.currentFee=null,this.fees=null,this.amount=null}ngOnInit(){this.getFees(),this.getLimit(),this.banks=this.dataService.getBanksData()}getLimit(){return(0,d.mG)(this,void 0,void 0,function*(){const n=yield this.util.loader("");n.present();const i=yield this.transferService.getTransferLimit();n.dismiss(),i.result&&(i.result.data.error||(this.limits=i.result.data.data))})}getFees(){return(0,d.mG)(this,void 0,void 0,function*(){const n=yield this.userService.getUserFees();console.log(n),n.result&&(this.fees=n.result.data)})}amountChange(n){if(""==n)return this.amountHolder=null;n=n.replace(/,/g,""),this.checkLimit(),this.amount=this.currencyPipe.transform(n,"","","0.0-0"),this.amountHolder=parseFloat(this.amount.replace(/,/g,"")),this.amountHolder<=5e4?(this.currentFee=this.fees.transfer_less_than_limit,this.totalAmount=parseFloat(this.currentFee)+this.amountHolder):(this.currentFee=this.fees.transfer_greater_than_limit,this.totalAmount=parseFloat(this.currentFee)+this.amountHolder)}cancel(){this.modalController.dismiss()}getMax(){return parseFloat(this.limits.remain_daily)<parseFloat(this.limits.max_per)?parseFloat(this.limits.remain_daily):parseFloat(this.limits.max_per)}checkLimit(){if(this.amount){const n=parseFloat(this.amount.replace(/,/g,"")),i=parseFloat(this.limits.remain_daily)<parseFloat(this.limits.max_per)?parseFloat(this.limits.remain_daily):parseFloat(this.limits.max_per);console.log(i),console.log(n),n>=i&&(this.blocked=!0)}}keyPressNumbers(n){console.log(this.amount),setTimeout(()=>{if(this.amount&&parseFloat(this.amount.replace(/,/g,""))>=(parseFloat(this.limits.remain_daily)<parseFloat(this.limits.max_per)?parseFloat(this.limits.remain_daily):parseFloat(this.limits.max_per)))return!1;const i=n.which?n.which:n.keyCode;return i<48||i>57?(n.preventDefault(),!1):(console.log(this.amountHolder),!0)},1e3)}verify(){return(0,d.mG)(this,void 0,void 0,function*(){if(this.beneficiary)return;this.verifying=!0;const n=yield this.transferService.verifyBank({bank_code:this.bankCode,account_number:this.account_number});if(this.verifying=!1,n.result)if(n.result.data.error)this.toastService.presentToast("Error","top","danger",n.result.data.message,2e3);else{const i=n.result.data.data;console.log(i),this.accountName=i.account_name,this.verified=!0}else this.toastService.presentToast("Error","top","danger","Unable to verify user",2e3)})}chooseBank(){return(0,d.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:t.F,swipeToClose:!0,componentProps:{type:"Bank"},cssClass:"transfer-modal"});yield n.present();const{data:i}=yield n.onDidDismiss();i&&i.bank_code&&(this.beneficiary=!1,this.bankCode=i.bank_code,this.bankName=i.bank_name,this.account_number=null)})}bankChange(n){console.log(n.detail.value),this.bankCode=n.detail.value,this.account_number=null}selectBeneficiary(){return(0,d.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:t.F,swipeToClose:!0,componentProps:{type:"Beneficiary"},cssClass:"transfer-modal"});yield n.present();const{data:i}=yield n.onDidDismiss();i&&i.payload&&(this.beneficiary=!0,this.bankCode=i.payload.service_code,this.bankName=i.payload.service_name,this.account_number=i.payload.service_number,this.accountName=i.payload.name,this.verified=!0,this.numberIsComplete=!0)})}confirmTransaction(){return(0,d.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:c.V,swipeToClose:!1,cssClass:"transfer-modal"});yield n.present();let{data:i}=yield n.onWillDismiss();i.success?(console.log(i),this.transfer()):console.log("wrong")})}switchBeneficiary(n){this.addBeneficiary=n.detail.checked}transfer(){return(0,d.mG)(this,void 0,void 0,function*(){const n=yield this.util.loader("Sending");n.present();const i={amount:parseFloat(this.amount.replace(/,/g,"")),bank_code:this.bankCode,account_number:this.account_number,account_name:this.accountName,narration:this.narration},o=yield this.transferService.sendToBank(i);o.result?o.result.data.error?(n.dismiss(),this.toastService.presentToast("Error","top","danger",o.result.data.message,2e3)):(this.addBeneficiary&&(yield this.transferService.addToBeneficiaries({account_id:"",type:"bank",name:o.result.data.data.account_name,service:"bank",service_code:o.result.data.data.bank_code,service_name:o.result.data.data.bank_name,service_number:o.result.data.data.account_number,logo:""}),this.dataService.commitBeneficiaries()),n.dismiss(),this.toastService.presentToast("Success","top","success",o.result.data.message,2e3),this.modalController.dismiss({reload:!0})):(n.dismiss(),this.toastService.presentToast("Error","top","danger","Transfer not completed",2e3))})}acctNumChange(n){console.log(n),n.length>9?(this.numberIsComplete=!0,this.verify()):(this.error(),console.log("less"))}error(){this.numberIsComplete=!1,this.verified=!1,this.verifying=!1,this.accountName=null}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(l.IN),e.Y36(P.qu),e.Y36(y.D),e.Y36(f.k),e.Y36(l.SH),e.Y36(M.t),e.Y36(_.H9),e.Y36(C.Z),e.Y36(b.K))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-bank-transfer"]],decls:27,vars:9,consts:[["slot","start"],[3,"click"],[1,"ion-padding"],[1,"ion-list-header-small","mb-20","ion-padding-bottom"],[1,"form-default"],["lines","none",1,"item-card-list"],[4,"ngIf"],["class","animate__animated animate__fadeIn",4,"ngIf"],["collapse","fade",1,"modal-footer"],["color","secondary"],["expand","block","color","primary",3,"disabled","click"],[1,"amount"],["color","tertiary","position","stacked"],["pattern","^[1-9][0-9]*$","placeholder","Amount","type","tel",3,"ngModel","ngModelOptions","ngModelChange","keypress"],[1,"animate__animated","animate__fadeIn"],["type","text",3,"ngModel","ngModelOptions","readonly","value","click","ngModelChange"],["slot","end",1,"verify","ios","button","button-small","button-solid","ion-activatable","ion-focusable","hydrated",3,"disabled","click"],["maxlength","10","placeholder","Account number","type","tel",3,"readonly","ngModel","ngModelChange"],["animated","",2,"width","50%"],[2,"padding-bottom","20px"],["animated","",2,"width","80%"],["readonly","true","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["type","text",3,"ngModel","ngModelChange"],[1,"beneficiary"],["slot","end",3,"ngModel","ngModelOptions","ionChange","ngModelChange"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return i.cancel()}),e._uU(4," Cancel "),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6," Bank Transfer "),e.qZA()()(),e.TgZ(7,"ion-content")(8,"div",2)(9,"ion-list-header",3)(10,"ion-label"),e._uU(11,"Send Money straight into recipient's local bank account, PayPaddi is fast, safe and reliable, proceed below."),e.qZA()(),e.TgZ(12,"div",4)(13,"ion-list",5),e.YNc(14,T,11,8,"div",6),e.YNc(15,m,6,6,"ion-item",7),e.YNc(16,u,4,2,"ion-item",6),e.YNc(17,g,6,0,"ion-item",7),e.YNc(18,k,4,3,"ion-item",7),e.YNc(19,O,4,1,"ion-item",7),e.YNc(20,E,4,3,"ion-item",7),e.YNc(21,x,7,6,"ul",7),e.qZA()()()(),e.TgZ(22,"ion-footer",8)(23,"ion-toolbar",9)(24,"ion-button",10),e.NdJ("click",function(){return i.confirmTransaction()}),e.TgZ(25,"span"),e._uU(26,"Transfer"),e.qZA()()()()),2&n&&(e.xp6(14),e.Q6J("ngIf",i.limits),e.xp6(1),e.Q6J("ngIf",i.amountHolder>20&&i.amountHolder<=i.getMax()),e.xp6(1),e.Q6J("ngIf",""!==i.bankCode),e.xp6(1),e.Q6J("ngIf",!i.verified&&i.verifying),e.xp6(1),e.Q6J("ngIf",i.verified&&i.numberIsComplete),e.xp6(1),e.Q6J("ngIf",i.verified&&i.numberIsComplete),e.xp6(1),e.Q6J("ngIf",i.verified&&i.numberIsComplete&&!i.beneficiary),e.xp6(1),e.Q6J("ngIf",i.amountHolder),e.xp6(3),e.Q6J("disabled",!i.accountName))},dependencies:[_.O5,P.JJ,P.nD,P.c5,P.On,l.YG,l.Sm,l.W2,l.fr,l.Gu,l.pK,l.Ie,l.Q$,l.q_,l.yh,l.CK,l.wd,l.ho,l.sr,l.w,l.j9,_.H9],styles:["ion-footer[_ngcontent-%COMP%]{background:rgb(20,26,31)}ion-label.beneficiary[_ngcontent-%COMP%]{margin:0!important}ion-button.verify[_ngcontent-%COMP%]{position:absolute;right:0;height:100%;z-index:999}ion-item.amount[_ngcontent-%COMP%]{margin-bottom:0!important}small[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;margin-top:5px;margin-bottom:12px;width:100%;display:flex;justify-content:space-between}"]}),r})()},5216:(Z,v,a)=>{a.d(v,{V:()=>b});var d=a(655),t=a(2096),c=a(8779),e=a(4182),l=a(649),P=a(1228),y=a(7913),f=a(9244),M=a(9808);function _(p,T){if(1&p&&(t.TgZ(0,"ion-col",10),t._UZ(1,"div"),t.qZA()),2&p){const m=T.$implicit,u=t.oxw();t.xp6(1),t.Udp("background",u.input.length>=m?"var(--ion-color-primary)":"")}}const C=function(){return[1,2,3,4]};let b=(()=>{class p{constructor(m,u,g,k,O,E,x){this.modalController=m,this.loadingController=u,this.formBuilder=g,this.toastService=k,this.auth=O,this.util=E,this.dataService=x,this.submit_attempt=!1,this.input=[]}ngOnInit(){}cancel(){this.modalController.dismiss({success:!1})}appendValue(m){this.input.length<4?(console.log(m,"==>",this.input),"minus"==m?0!==this.input.length&&this.input.pop():(this.input.push(m),this.input.length>3&&(console.log(this.input.join("")),this.verify(this.input.join(""))))):"minus"==m&&this.input.pop()}verify(m){return(0,d.mG)(this,void 0,void 0,function*(){this.submit_attempt=!0;const u=this.dataService.getUserProfile();m===u.pin?this.modalController.dismiss({success:!0}):(this.input=[],this.toastService.presentToast("Error","top","danger","Incorrect Pin",2e3))})}}return p.\u0275fac=function(m){return new(m||p)(t.Y36(c.IN),t.Y36(c.HT),t.Y36(e.qu),t.Y36(l.k),t.Y36(P.e),t.Y36(y.t),t.Y36(f.D))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-pin-verify"]],decls:53,vars:2,consts:[["slot","start"],[3,"click"],[1,"ion-padding"],["fixed","",1,"pin"],["size","3",4,"ngFor","ngForOf"],["color","secondary"],["fixed","",1,"keyboard"],["size","4"],[1,"cancel",3,"click"],["name","arrow-back-outline"],["size","3"]],template:function(m,u){1&m&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),t.NdJ("click",function(){return u.cancel()}),t._uU(4," Cancel "),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6," Verify Transaction PIN "),t.qZA()()(),t.TgZ(7,"ion-content")(8,"div",2)(9,"ion-grid",3)(10,"ion-row"),t.YNc(11,_,2,2,"ion-col",4),t.qZA()()()(),t.TgZ(12,"ion-footer")(13,"ion-toolbar",5)(14,"ion-grid",6)(15,"ion-row")(16,"ion-col",7)(17,"ion-button",1),t.NdJ("click",function(){return u.appendValue("1")}),t._uU(18," 1 "),t.qZA()(),t.TgZ(19,"ion-col",7)(20,"ion-button",1),t.NdJ("click",function(){return u.appendValue("2")}),t._uU(21,"2"),t.qZA()(),t.TgZ(22,"ion-col",7)(23,"ion-button",1),t.NdJ("click",function(){return u.appendValue("3")}),t._uU(24,"3"),t.qZA()()(),t.TgZ(25,"ion-row")(26,"ion-col",7)(27,"ion-button",1),t.NdJ("click",function(){return u.appendValue("4")}),t._uU(28,"4"),t.qZA()(),t.TgZ(29,"ion-col",7)(30,"ion-button",1),t.NdJ("click",function(){return u.appendValue("5")}),t._uU(31,"5"),t.qZA()(),t.TgZ(32,"ion-col",7)(33,"ion-button",1),t.NdJ("click",function(){return u.appendValue("6")}),t._uU(34,"6"),t.qZA()()(),t.TgZ(35,"ion-row")(36,"ion-col",7)(37,"ion-button",1),t.NdJ("click",function(){return u.appendValue("7")}),t._uU(38,"7"),t.qZA()(),t.TgZ(39,"ion-col",7)(40,"ion-button",1),t.NdJ("click",function(){return u.appendValue("8")}),t._uU(41,"8"),t.qZA()(),t.TgZ(42,"ion-col",7)(43,"ion-button",1),t.NdJ("click",function(){return u.appendValue("9")}),t._uU(44,"9"),t.qZA()()(),t.TgZ(45,"ion-row"),t._UZ(46,"ion-col",7),t.TgZ(47,"ion-col",7)(48,"ion-button",1),t.NdJ("click",function(){return u.appendValue("0")}),t._uU(49,"0"),t.qZA()(),t.TgZ(50,"ion-col",7)(51,"ion-button",8),t.NdJ("click",function(){return u.appendValue("minus")}),t._UZ(52,"ion-icon",9),t.qZA()()()()()()),2&m&&(t.xp6(11),t.Q6J("ngForOf",t.DdM(1,C)))},dependencies:[M.sg,c.YG,c.Sm,c.wI,c.W2,c.fr,c.jY,c.Gu,c.gu,c.Nd,c.wd,c.sr],styles:["ion-grid.keyboard[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]{text-align:center;padding:8px}ion-grid.keyboard[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{--border-radius: 50%;height:75px;width:75px;color:#000}ion-grid.keyboard[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%] > ion-button.cancel[_ngcontent-%COMP%]{--background: none;color:#fff}ion-grid.pin[_ngcontent-%COMP%]{padding:50px 20px}ion-grid.pin[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%]{text-align:center}ion-grid.pin[_ngcontent-%COMP%] > ion-row[_ngcontent-%COMP%] > ion-col[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:40px;width:40px;margin:auto;display:flex;justify-content:center;align-items:center;border-radius:50%;border:1px solid #595a5d}"]}),p})()},1228:(Z,v,a)=>{a.d(v,{e:()=>y});var d=a(655),t=a(65),c=a(2096),e=a(1493),l=a(7913),P=a(8052);let y=(()=>{class f{constructor(_,C,b){this.router=_,this.util=C,this.req=b}getSession(){return(0,d.mG)(this,void 0,void 0,function*(){return!1})}signIn(_){return(0,d.mG)(this,void 0,void 0,function*(){return yield this.req.axiosPost("login",_)})}signUp(_){return(0,d.mG)(this,void 0,void 0,function*(){return yield this.req.axiosPost("register",_)})}updatePin(_){return(0,d.mG)(this,void 0,void 0,function*(){return yield this.req.axiosPost("update/pin",_)})}changePassword(_){return(0,d.mG)(this,void 0,void 0,function*(){return yield this.req.axiosPost("login",_)})}signOut(){return(0,d.mG)(this,void 0,void 0,function*(){yield t.u.remove({key:"accessToken"}),this.router.navigateByUrl("/signin")})}resetPassword(_){return(0,d.mG)(this,void 0,void 0,function*(){return yield this.req.axiosPost("password-reset",{email:_})})}}return f.\u0275fac=function(_){return new(_||f)(c.LFG(e.F0),c.LFG(l.t),c.LFG(P.s))},f.\u0275prov=c.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);